# WhatDj v2 Configuration
# Copy this file to .env and update with your values

# =============================================================================
# CHAT PLATFORMS - Choose one primary platform
# =============================================================================

# Telegram (Recommended - Default enabled)
WHATDJ_TELEGRAM_ENABLED=true
WHATDJ_TELEGRAM_BOT_TOKEN=123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11
WHATDJ_TELEGRAM_GROUP_ID=-100xxxxxxxxxx

# Telegram Features
WHATDJ_TELEGRAM_REACTION_SUPPORT=true
WHATDJ_ADMIN_APPROVAL=false
WHATDJ_ADMIN_NEEDS_APPROVAL=false
WHATDJ_COMMUNITY_APPROVAL=0

# WhatsApp (Optional - Disabled by default due to ToS concerns)
WHATDJ_WHATSAPP_ENABLED=false
WHATDJ_WHATSAPP_GROUP_JID=120363123456789@g.us
WHATDJ_WHATSAPP_DEVICE_NAME="WhatDj"
WHATDJ_WHATSAPP_SESSION_PATH="./whatsapp_session.db"

# =============================================================================
# SPOTIFY CONFIGURATION - Required
# =============================================================================

WHATDJ_SPOTIFY_CLIENT_ID=your_spotify_client_id_here
WHATDJ_SPOTIFY_CLIENT_SECRET=your_spotify_client_secret_here
WHATDJ_SPOTIFY_PLAYLIST_ID=your_target_playlist_id_here
WHATDJ_SPOTIFY_REDIRECT_URL=http://127.0.0.1:8080/callback
WHATDJ_SPOTIFY_TOKEN_PATH=./spotify_token.json

# =============================================================================
# AI/LLM CONFIGURATION - Optional
# =============================================================================

# LLM Provider (none, openai, anthropic, ollama)
WHATDJ_LLM_PROVIDER=none

# OpenAI Configuration
# WHATDJ_LLM_PROVIDER=openai
# WHATDJ_LLM_API_KEY=sk-...
# WHATDJ_LLM_MODEL=gpt-4o-mini

# Anthropic Configuration
# WHATDJ_LLM_PROVIDER=anthropic
# WHATDJ_LLM_API_KEY=sk-ant-...
# WHATDJ_LLM_MODEL=claude-3-haiku-20240307

# Ollama Configuration (Local)
# WHATDJ_LLM_PROVIDER=ollama
# WHATDJ_LLM_BASE_URL=http://localhost:11434
# WHATDJ_LLM_MODEL=llama2

# LLM Settings
WHATDJ_LLM_THRESHOLD=0.65
WHATDJ_LLM_MAX_CANDIDATES=3

# Additional LLM options (usually not needed)
# WHATDJ_LLM_API_KEY=your_api_key_here  # Set above based on provider
# WHATDJ_LLM_MODEL=your_model_name      # Set above based on provider

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================

# Bot Language (supported: en, ch_be)
# Default: en (English)
WHATDJ_LANGUAGE=en

# Timeouts and Retries
WHATDJ_CONFIRM_TIMEOUT_SECS=120
WHATDJ_CONFIRM_ADMIN_TIMEOUT_SECS=3600
WHATDJ_QUEUE_TRACK_APPROVAL_TIMEOUT_SECS=30
WHATDJ_MAX_QUEUE_TRACK_REPLACEMENTS=3
WHATDJ_MAX_RETRIES=3
WHATDJ_RETRY_DELAY_SECS=5

# Queue Management - Ensures continuous playback by managing Spotify queue
WHATDJ_QUEUE_AHEAD_DURATION_SECS=90
WHATDJ_QUEUE_CHECK_INTERVAL_SECS=45

# Shadow Queue - Maintains reliable queue state tracking
WHATDJ_SHADOW_QUEUE_MAINTENANCE_INTERVAL_MINS=5
WHATDJ_SHADOW_QUEUE_MAX_AGE_HOURS=2
WHATDJ_SHADOW_QUEUE_PREFERENCE_ENABLED=true

# HTTP Server
WHATDJ_SERVER_HOST=127.0.0.1
WHATDJ_SERVER_PORT=8080

# Logging
WHATDJ_LOG_LEVEL=info
WHATDJ_LOG_FORMAT=json

# =============================================================================
# SETUP INSTRUCTIONS
# =============================================================================

# 1. TELEGRAM SETUP (Recommended):
#    - Message @BotFather on Telegram
#    - Create bot with /newbot command
#    - Copy bot token to WHATDJ_TELEGRAM_BOT_TOKEN
#    - Add bot to your group as admin
#    - Get group ID with @userinfobot and set WHATDJ_TELEGRAM_GROUP_ID
#    - Set WHATDJ_TELEGRAM_ENABLED=true
#    - Optional: Set WHATDJ_ADMIN_APPROVAL=true for admin-only song approval
#    - Optional: Set WHATDJ_ADMIN_NEEDS_APPROVAL=true to require approval even for admins (testing)
#    - Optional: Set WHATDJ_COMMUNITY_APPROVAL=3 to allow 3+ üëç reactions to bypass admin approval (0 disables)

# 2. WHATSAPP SETUP (Optional):
#    - Set WHATDJ_WHATSAPP_ENABLED=true
#    - Run app with debug logging to see group JIDs
#    - Scan QR code with your phone when prompted
#    - WARNING: May violate WhatsApp ToS - use at your own risk

# 3. SPOTIFY SETUP (Required):
#    - Go to https://developer.spotify.com/dashboard
#    - Create new app
#    - Add redirect URI: http://127.0.0.1:8080/callback
#    - Copy Client ID and Secret
#    - Get playlist ID from Spotify URL (the part after /playlist/)

# 4. LLM SETUP (Optional but recommended):
#    - Choose provider (OpenAI recommended for best results)
#    - Get API key from provider
#    - Set appropriate model for your needs

# 5. LANGUAGE SETUP (Optional):
#    - Default: en (English)
#    - Available: ch_be (Bernese German)
#    - Set WHATDJ_LANGUAGE=ch_be for Swiss German messages
#    - Bot will show startup/shutdown messages and all user interactions in selected language

# 6. RUN THE APPLICATION:
#    go run ./cmd/whatdj
#    or
#    make build && ./bin/whatdj

# =============================================================================
# EXAMPLE CONFIGURATIONS
# =============================================================================

# Example 1: Basic English Telegram setup
# WHATDJ_LANGUAGE=en
# WHATDJ_TELEGRAM_ENABLED=true
# WHATDJ_TELEGRAM_BOT_TOKEN=your_bot_token
# WHATDJ_TELEGRAM_GROUP_ID=-1001234567890

# Example 2: Swiss German with admin approval and community override
# WHATDJ_LANGUAGE=ch_be
# WHATDJ_ADMIN_APPROVAL=true
# WHATDJ_COMMUNITY_APPROVAL=3
# WHATDJ_TELEGRAM_ENABLED=true

# Example 3: Debug mode with local Ollama
# WHATDJ_LOG_LEVEL=debug
# WHATDJ_LLM_PROVIDER=ollama
# WHATDJ_LLM_MODEL=llama3.2