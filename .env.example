# DJAlgoRhythm Configuration
# Copy this file to .env and update with your values

# =============================================================================
# CHAT PLATFORMS - Choose one primary platform
# =============================================================================

# Telegram (Recommended - Default enabled)
DJALGORHYTHM_TELEGRAM_ENABLED=true
DJALGORHYTHM_TELEGRAM_BOT_TOKEN=123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11
DJALGORHYTHM_TELEGRAM_GROUP_ID=-100xxxxxxxxxx

# Telegram Features
DJALGORHYTHM_TELEGRAM_REACTION_SUPPORT=true
DJALGORHYTHM_ADMIN_APPROVAL=false
DJALGORHYTHM_ADMIN_NEEDS_APPROVAL=false
DJALGORHYTHM_COMMUNITY_APPROVAL=2

# WhatsApp (Optional - Disabled by default due to ToS concerns)
DJALGORHYTHM_WHATSAPP_ENABLED=false
DJALGORHYTHM_WHATSAPP_GROUP_JID=120363123456789@g.us
DJALGORHYTHM_WHATSAPP_DEVICE_NAME="DJAlgoRhythm"
DJALGORHYTHM_WHATSAPP_SESSION_PATH="./whatsapp_session.db"

# =============================================================================
# SPOTIFY CONFIGURATION - Required
# =============================================================================

DJALGORHYTHM_SPOTIFY_CLIENT_ID=your_spotify_client_id_here
DJALGORHYTHM_SPOTIFY_CLIENT_SECRET=your_spotify_client_secret_here
DJALGORHYTHM_SPOTIFY_PLAYLIST_ID=your_target_playlist_id_here
DJALGORHYTHM_SPOTIFY_REDIRECT_URL=http://127.0.0.1:8080/callback
DJALGORHYTHM_SPOTIFY_TOKEN_PATH=./spotify_token.json

# =============================================================================
# AI/LLM CONFIGURATION - Optional
# =============================================================================

# LLM Provider (none, openai, anthropic, ollama)
DJALGORHYTHM_LLM_PROVIDER=none

# OpenAI Configuration
# DJALGORHYTHM_LLM_PROVIDER=openai
# DJALGORHYTHM_LLM_API_KEY=sk-...
# DJALGORHYTHM_LLM_MODEL=gpt-4o-mini

# Anthropic Configuration
# DJALGORHYTHM_LLM_PROVIDER=anthropic
# DJALGORHYTHM_LLM_API_KEY=sk-ant-...
# DJALGORHYTHM_LLM_MODEL=claude-3-haiku-20240307

# Ollama Configuration (Local)
# DJALGORHYTHM_LLM_PROVIDER=ollama
# DJALGORHYTHM_LLM_BASE_URL=http://localhost:11434
# DJALGORHYTHM_LLM_MODEL=llama2

# LLM Settings
DJALGORHYTHM_LLM_MAX_CANDIDATES=3

# Additional LLM options (usually not needed)
# DJALGORHYTHM_LLM_API_KEY=your_api_key_here  # Set above based on provider
# DJALGORHYTHM_LLM_MODEL=your_model_name      # Set above based on provider

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================

# Bot Language (supported: en, ch_be)
# Default: en (English)
DJALGORHYTHM_LANGUAGE=en

# Timeouts and Retries
DJALGORHYTHM_CONFIRM_TIMEOUT_SECS=120
DJALGORHYTHM_CONFIRM_ADMIN_TIMEOUT_SECS=3600
DJALGORHYTHM_QUEUE_TRACK_APPROVAL_TIMEOUT_SECS=30
DJALGORHYTHM_MAX_QUEUE_TRACK_REPLACEMENTS=3
DJALGORHYTHM_MAX_RETRIES=3
DJALGORHYTHM_RETRY_DELAY_SECS=5

# Queue Management - Ensures continuous playback by managing Spotify queue
DJALGORHYTHM_QUEUE_AHEAD_DURATION_SECS=90
DJALGORHYTHM_QUEUE_CHECK_INTERVAL_SECS=45

# Shadow Queue - Maintains reliable queue state tracking
DJALGORHYTHM_SHADOW_QUEUE_MAINTENANCE_INTERVAL_SECS=30
DJALGORHYTHM_SHADOW_QUEUE_MAX_AGE_HOURS=2
DJALGORHYTHM_SHADOW_QUEUE_PREFERENCE_ENABLED=true

# Flood Prevention - Anti-spam protection (fixed 1-minute window)
DJALGORHYTHM_FLOOD_LIMIT_PER_MINUTE=6

# HTTP Server
DJALGORHYTHM_SERVER_HOST=127.0.0.1
DJALGORHYTHM_SERVER_PORT=8080

# Logging
DJALGORHYTHM_LOG_LEVEL=info
DJALGORHYTHM_LOG_FORMAT=json

# =============================================================================
# SETUP INSTRUCTIONS
# =============================================================================

# 1. TELEGRAM SETUP (Recommended):
#    - Message @BotFather on Telegram
#    - Create bot with /newbot command
#    - Copy bot token to DJALGORHYTHM_TELEGRAM_BOT_TOKEN
#    - Add bot to your group as admin
#    - Get group ID with @userinfobot and set DJALGORHYTHM_TELEGRAM_GROUP_ID
#    - Set DJALGORHYTHM_TELEGRAM_ENABLED=true
#    - Optional: Set DJALGORHYTHM_ADMIN_APPROVAL=true for admin-only song approval
#    - Optional: Set DJALGORHYTHM_ADMIN_NEEDS_APPROVAL=true to require approval even for admins (testing)
#    - Optional: Set DJALGORHYTHM_COMMUNITY_APPROVAL=3 to allow 3+ üëç reactions to bypass admin approval (0 disables)

# 2. WHATSAPP SETUP (Optional):
#    - Set DJALGORHYTHM_WHATSAPP_ENABLED=true
#    - Run app with debug logging to see group JIDs
#    - Scan QR code with your phone when prompted
#    - WARNING: May violate WhatsApp ToS - use at your own risk

# 3. SPOTIFY SETUP (Required):
#    - Go to https://developer.spotify.com/dashboard
#    - Create new app
#    - Add redirect URI: http://127.0.0.1:8080/callback
#    - Copy Client ID and Secret
#    - Get playlist ID from Spotify URL (the part after /playlist/)

# 4. LLM SETUP (Optional but recommended):
#    - Choose provider (OpenAI recommended for best results)
#    - Get API key from provider
#    - Set appropriate model for your needs

# 5. LANGUAGE SETUP (Optional):
#    - Default: en (English)
#    - Available: ch_be (Bernese German)
#    - Set DJALGORHYTHM_LANGUAGE=ch_be for Swiss German messages
#    - Bot will show startup/shutdown messages and all user interactions in selected language

# 6. RUN THE APPLICATION:
#    go run ./cmd/djalgorhythm
#    or
#    make build && ./bin/djalgorhythm

# =============================================================================
# EXAMPLE CONFIGURATIONS
# =============================================================================

# Example 1: Basic English Telegram setup
# DJALGORHYTHM_LANGUAGE=en
# DJALGORHYTHM_TELEGRAM_ENABLED=true
# DJALGORHYTHM_TELEGRAM_BOT_TOKEN=your_bot_token
# DJALGORHYTHM_TELEGRAM_GROUP_ID=-1001234567890

# Example 2: Swiss German with admin approval and community override
# DJALGORHYTHM_LANGUAGE=ch_be
# DJALGORHYTHM_ADMIN_APPROVAL=true
# DJALGORHYTHM_COMMUNITY_APPROVAL=3
# DJALGORHYTHM_TELEGRAM_ENABLED=true

# Example 3: Debug mode with local Ollama
# DJALGORHYTHM_LOG_LEVEL=debug
# DJALGORHYTHM_LLM_PROVIDER=ollama
# DJALGORHYTHM_LLM_MODEL=llama3.2